<div class="bg-gray-50 min-h-screen">
  <app-header />
  <main class="pt-16">
    <!-- Header Section -->
    <section class="bg-white border-b border-gray-200 py-8">
      <div class="container mx-auto px-6">
        <div class="max-w-6xl mx-auto">
          <div class="flex items-center gap-4 mb-6">
            <button routerLink="/practitioner/dashboard" class="flex items-center gap-2 text-gray-600 hover:text-gray-900">
              <i class="ri-arrow-left-line"></i>
              Back to Dashboard
            </button>
          </div>
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-3xl font-bold text-gray-900 mb-2">Profile Management</h1>
              <p class="text-gray-600">Manage your professional profile and public information</p>
            </div>
            <button (click)="toggleEdit()" 
                    [class]="'px-6 py-3 rounded-lg font-medium transition-colors ' + (isEditing ? 'bg-gray-200 text-gray-700 hover:bg-gray-300' : 'bg-blue-600 text-white hover:bg-blue-700')">
              <i [class]="(isEditing ? 'ri-close-line' : 'ri-edit-line') + ' mr-2'"></i>
              {{ isEditing ? 'Cancel' : 'Edit Profile' }}
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Profile Content -->
    <section class="py-12">
      <div class="container mx-auto px-6">
        <div class="max-w-6xl mx-auto">
          <div class="grid lg:grid-cols-3 gap-8">
            <!-- Profile Photo & Basic Info -->
            <div class="bg-white rounded-xl border border-gray-200 p-8 text-center">
              <div class="relative inline-block mb-6">
                <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=200&h=200&fit=crop&crop=face" 
                     alt="Profile Photo" 
                     class="w-32 h-32 rounded-full object-cover border-4 border-gray-200">
                <button *ngIf="isEditing" 
                        class="absolute bottom-0 right-0 w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors">
                  <i class="ri-camera-line"></i>
                  <input type="file" accept="image/*" (change)="onPhotoUpload($event)" class="absolute inset-0 opacity-0 cursor-pointer">
                </button>
              </div>
              
              <h2 class="text-xl font-bold text-gray-900 mb-2">{{ profile.firstName }} {{ profile.lastName }}</h2>
              <p class="text-gray-600 mb-4">{{ profile.profession }}</p>
              
              <div class="space-y-2 text-sm">
                <div class="flex items-center justify-center gap-2">
                  <i class="ri-shield-check-line text-green-500"></i>
                  <span class="text-green-600 font-medium">Verified Professional</span>
                </div>
                <div class="flex items-center justify-center gap-2">
                  <i class="ri-map-pin-line text-gray-400"></i>
                  <span class="text-gray-600">{{ profile.city }}, {{ profile.country }}</span>
                </div>
                <div class="flex items-center justify-center gap-2">
                  <i class="ri-building-line text-gray-400"></i>
                  <span class="text-gray-600">{{ profile.institution }}</span>
                </div>
              </div>
            </div>

            <!-- Profile Form -->
            <div class="lg:col-span-2 bg-white rounded-xl border border-gray-200 p-8">
              <form class="space-y-8">
                <!-- Personal Information -->
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 mb-4">Personal Information</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                      <input type="text" [(ngModel)]="profile.firstName" name="firstName" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                      <input type="text" [(ngModel)]="profile.lastName" name="lastName" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
                      <input type="date" [(ngModel)]="profile.dateOfBirth" name="dateOfBirth" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
                      <select [(ngModel)]="profile.gender" name="gender" [disabled]="!isEditing"
                              [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- Contact Information -->
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 mb-4">Contact Information</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                      <input type="email" [(ngModel)]="profile.email" name="email" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                      <input type="tel" [(ngModel)]="profile.phone" name="phone" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                    <div class="md:col-span-2">
                      <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                      <textarea [(ngModel)]="profile.address" name="address" [readonly]="!isEditing" rows="3"
                                [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')"></textarea>
                    </div>
                  </div>
                </div>

                <!-- Professional Information -->
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 mb-4">Professional Information</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Profession</label>
                      <select [(ngModel)]="profile.profession" name="profession" [disabled]="!isEditing"
                              [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                        <option *ngFor="let profession of professions" [value]="profession.value">{{ profession.label }}</option>
                      </select>
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Specialization</label>
                      <input type="text" [(ngModel)]="profile.specialization" name="specialization" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">License Number</label>
                      <input type="text" [value]="profile.licenseNumber" readonly
                             class="w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-lg">
                      <p class="text-xs text-gray-500 mt-1">License number cannot be changed</p>
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Institution</label>
                      <input type="text" [(ngModel)]="profile.institution" name="institution" [readonly]="!isEditing"
                             [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                    </div>
                  </div>
                </div>

                <!-- Privacy Settings -->
                <div>
                  <h3 class="text-lg font-semibold text-gray-900 mb-4">Privacy Settings</h3>
                  <div class="space-y-4">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">Profile Visibility</label>
                      <select [(ngModel)]="profile.profileVisibility" name="profileVisibility" [disabled]="!isEditing"
                              [class]="'w-full px-4 py-3 border rounded-lg ' + (isEditing ? 'border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent' : 'border-gray-200 bg-gray-50')">
                        <option value="public">Public - Anyone can view</option>
                        <option value="verified-only">Verified Users Only</option>
                        <option value="private">Private - Hidden from search</option>
                      </select>
                    </div>
                    
                    <div class="flex items-center gap-3">
                      <input type="checkbox" [(ngModel)]="profile.allowDirectContact" name="allowDirectContact" [disabled]="!isEditing"
                             class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                      <label class="text-sm text-gray-700">Allow direct contact from verified users</label>
                    </div>
                    
                    <div class="flex items-center gap-3">
                      <input type="checkbox" [(ngModel)]="profile.showInstitution" name="showInstitution" [disabled]="!isEditing"
                             class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                      <label class="text-sm text-gray-700">Show current institution in public profile</label>
                    </div>
                  </div>
                </div>

                <!-- Save Button -->
                <div *ngIf="isEditing" class="flex gap-4 pt-6 border-t border-gray-200">
                  <button (click)="saveProfile()" 
                          class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition-colors">
                    <i class="ri-save-line mr-2"></i>
                    Save Changes
                  </button>
                  <button (click)="cancelEdit()" 
                          class="border border-gray-300 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-50 transition-colors">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <app-footer />
</div>